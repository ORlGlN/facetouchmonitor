<!doctype html>
<html lang="em">
<head>
    <title>Face Touch Monitor - get alerts when you touch your face</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Load TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2"></script>
    <!-- Load BodyPix -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"></script>
    <title></title>
</head>

<body>
<div id="main">
    <canvas></canvas>
    <video id="myVid" autoplay></video>
    <div id="content">
        <h1>Face Touch Monitor</h1>
        <h4>Learn to stop touching your face! </h4>
        <p>
            This page counts when you touch your face and optionally alerts you.
            The reminders will help making you aware so you can train yourself to stop accidental face touching.
            Just keep this page running in the background as you use your computer.
        </p>
        <p>
            No information is shared externally.
            Machine learning on your image is done 100% locally in your browser.
        </p>
        <p>Click anywhere to get started.</p>
        <br>
        <p id="usageNoteMain"><em>Note: this is a quick hack that we'll improve.
            It currently has no depth perception, so a hand in front of your face will set it off.
            Works best on Chrome. Tested in Edge (Chromium-based) and Firefox. Haven't been able to make it work with Safari yet.
            It usually does not detect as well if you are very close to the camera.
            It will not work well on slower devices or mobile.</em></p>
        <button id="start">Start monitoring</button>
    </div>
</div>
<div id="dashboard">
    <h3>Stats</h3>
    <p>Status: <span id="userMessage">Click in the left are activate your webcam.</span></p>
    <div id="statsDiv" hidden>
        <p>Touches:  <span id="touches"></span></p>
        <p>Last Touch:  <span id="lastTouch"></span></p>
        <p>FPS: <span id="fps"></span></p>
    </div>
    <h3>Controls</h3>
    <div id="controls">
        <label for="alertTimeOut">Time between alerts (s)</label>
        <input type="text" size=4 id="alertTimeOut" name="alertTimeOut" value="1"><br>

        <input type="checkbox" id="beepToggle" name="beepToggle" value="beepToggle" checked >
        <label for="beepToggle">Beep on touch</label><br>

        <input type="checkbox" id="notifyToggle" name="notifyToggle" value="notifyToggle" >
        <label for="notifyToggle">Browser notification on touch</label><br>

        <input type="checkbox" id="showMask" name="showMask" value="showMask">
        <label for="showMask">Show the mask</label><em>  Caution! This may harm results</em><br>

        <input type="checkbox" id="showPoints" name="showPoints" value="showPoints">
        <label for="showPoints">Show pose points</label><br>

        <p>Trade off speed for accuracy:</p>
        <button id="highSpeed">Faster</button>
        <button id="normalSpeed" disabled>Normal</button>
        <button id="lowerSpeed">More accurate</button>
        <button id="lowSpeed">Most accurate</button>


        <button id="exit">Exit / Restart</button>
        <div id="usageNoteSide"></div>
    </div>
</div>
<div id="credits">
    <p>Brought to you by <a href="https://webrtcHacks.com">webrtcHacks</a>.
        Powered by <a href="https://github.com/tensorflow/tfjs">tensorflow.js</a>
    </p>
</div>
<script src="ui-helper.js"></script>
<script src="gum.js"></script>
<script src="detect.js"></script>
</body>
</html>
